%% AMS prddvilualatex

\documentclass{amsart}

\csname noTeXMLhistory\endcsname

\nofiles

\usepackage{xcolor}

\usepackage{texml}

\ifTeXML
    \usepackage{Listings}
    \def\kwd{\XMLelement{kwd}}
    \def\id{\XMLelement{id}}
    \def\str{\XMLelement{str}}
\else
    \usepackage{listings}
    \def\kwd#1{{\color{blue}\textbf{#1}}}
    \def\id#1{{\color{red}\textbf{#1}}}
    \def\str#1{{\color{green}#1}}
\fi

\lstset{keywordstyle=\kwd}
\lstset{identifierstyle=\id}
\lstset{stringstyle=\str}

\lstset{morestring=[m]'}

\title{listings}

\begin{document}

\maketitle

We can't currently implement type-m strings.  See comments in
\texttt{listings.pm}.

\begin{lstlisting}
while (<>) {
    chomp;

    print 'string';
    print('string');

    print()'string';

    print[]'string';

    print'string';
}
\end{lstlisting}

\end{document}
