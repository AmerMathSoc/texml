%% AMS prddvilualatex

\documentclass{amsart}

\csname noTeXMLhistory\endcsname

\nofiles

\usepackage{texml}

\ifTeXML
    \usepackage{Listings}
    \def\id{\XMLelement{id}}
\else
    \usepackage{listings}
    \def\id#1{{\color{red}\textbf{#1}}}
\fi

\usepackage{xcolor}

\title{listings: escapeinside}

\begin{document}

\maketitle

hello, world

\lstset{identifierstyle=\id}
\lstset{basicstyle=\ttfamily}

\begin{lstlisting}
// calc(ulate $a_{ij}$)
   ($a_{ij} = a_{jj}/a_{ij}$);
\end{lstlisting}

\begin{lstlisting}[escapeinside=()]
// calc(ulate $a_{ij}$)
   ($a_{ij} = a_{jj}/a_{ij}$);
\end{lstlisting}

\end{document}
