\documentclass{amsart}

\csname noTeXMLarticlehistory\endcsname

\outputmode=0

\title{read}

\begin{document}

hello, world

\count255=0

\newread\datafile

\openin\datafile read_data.tex

\def\G#1{}

\everyeof{EOF}

\def\X{%
    \ifeof\datafile
        End of datafile\par
    \expandafter\G
    \else
        \advance\count255 by 1
        \read\datafile to \dataline
        \the\count255: [\dataline]\par
    \fi
    \X
}

\tracingmacros=1

\X

\end{document}
