%% AMS prddvilualatex

\documentclass{amsart}

\csname noTeXMLarticlehistory\endcsname

\title{toksapp, tokspre, etc.}

\def\S#1{{\tt\detokenize\expandafter{\the#1}}}

\def\A{[expansion of A]}
\def\B{[expansion of B]}
\def\C{[expansion of C]}

\newtoks\X
\newtoks\Y
\newtoks\Z

\begin{document}

\maketitle

hello, world

\adjdemerits=0

\toks\adjdemerits={adjdemrits}

\toksapp\adjdemerits{\AXG}

adjdemerits: \S{\toks\adjdemerits}

\toks0={0 tokens}

toks0: \S{\toks0}

\toksapp0{\A}

toksapp0: \S{\toks0}

\X={X tokens}

X: \S\X

\toksapp\X{\A}

toksapp X: \S\X

\Y={Y tokens}

\tokspre\Y{\B}

tokspre y: \S\Y

\X={X tokens}

\etoksapp\X{\A}

etoksapp X: \S\X

\X={X tokens}

\etoksapp\X{\noexpand\A\unexpanded{\C}}

etoksapp X: \S\X

\Y={Y tokens}

\etokspre\Y{\B}

etokspre Y: \S\Y

\everyjob={job tokens}

\etokspre\everyjob{\C}

etokspre everyjob: \S\everyjob

\toksapp\X\Y

toksapp X Y: \S\X

\end{document}

Funny business:

\let~\tokspre

\X={X tokens}

\tokspre \X{\A\C}

\S\X

\X={X tokens}

\tokspre \P{\A\C}

\S\P

\X={X tokens}

~ \X{\A\C}

\S\X

\end{document}
